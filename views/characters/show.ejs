<%- include("../partials/header")%>
<div class="container-fluid">
	<div class="row">
		<h2 class="text-center w-100">
			<%=character.Name%> The <%=character.Race%> <%=character.Class%>
		</h2>
		<%if(character.creator.id.equals(currentUser._id)) {%>
			<%if(playName === false){%>
			<a href="/campaigns/<%=campaign._id%>/characters/<%=character._id%>/edit"><button class="btn btn-success btn-large rounded">Edit</button></a>
			<form action="/campaigns/<%=campaign._id%>/characters/<%=character._id%>?_method=DELETE" method="POST"><button class="btn btn-danger btn-large rounded">Delete</button></form>
			<form action="/campaigns/<%=campaign._id%>/characters/<%=character._id%>/play" method="POST"><button class="btn btn-primary btn-large rounded">Play as <%=character.Name%></button></form> 
			<%}%>
			<%}%>
	</div>
	<div class="row text-center">
				<%for(var i = 0; i < 6; i++){
					var attr = Object.keys(character.Attributes.toObject())[i]
					var val = Object.values(character.Attributes.toObject())[i]%>
					<div id="<%=attr%>" class="attr m-0 col-4 col-md-2 w-100">
						<h5><%=attr%></h5>
						<h4><%=val%></h4>
					</div><%}%>
	</div>
</div>
<div class="container">
		<div class="row">
			<div class="col-4">
				<img class="img-thumbnail" src="<%=character.Image%>">
			</div>
			<div class="col-8 rounded <%=character.Class%>">
				<ul class="nav nav-tabs">
					<li class="nav-item">
					  <a id="BioBtn" class="Charshow nav-link active" href="javascript:void(0)">Bio</a>
					</li>
					<li class="nav-item">
					  <a id="WeapBtn" class="Charshow nav-link"href="javascript:void(0)">Weapons</a>
					</li>
					<li class="nav-item">
					  <a id="SpBtn" class="Charshow nav-link"href="javascript:void(0)">Spells</a>
					</li>
					<li class="nav-item">
					  <a id="MiscBtn" class="Charshow nav-link"href="javascript:void(0)">Misc</a>
					</li>
				  </ul>
				<div id="Bio" class="row">
					<% for(var i =3; i < 8; i++){
						var def = Object.keys(character._doc)[i];
						var arg = Object.values(character._doc)[i];%>
					<div class="col-6 py-3 attrCard"><h3><%=def%>:<%=arg%></h3></div>
					<%}%>
					<% for(var i = 9; i < 13; i++){
						var def = Object.keys(character._doc)[i];
						var arg = Object.values(character._doc)[i];%>
					<div  class="col-6 attrCard"><h3><%=def%>:<%=arg%></h3></div>
					<%}%> 
				</div>
				<div id="WepCard" class="pt-3 col-12">
					<h3>Weapons:</h3>
						<table class="table table-dark">
							<tr>
								<th>Name</th>
								<th>Damage</th>
								<th>Properties</th>
							</tr>
							<%character.Weapons.forEach(function(weapon){%>
								<tr>
									<td><button class="btn btn-sm <%=character.Class%>"><%=weapon.Name%></button></td>
									<td><%=weapon.Damage.Die%>: <%=weapon.Damage.Type%></td>
									<td><%Object.keys(weapon.Properties.toObject()).forEach(function(key){
										if(key === "Range"){%>
										  <%=key + ":" + weapon.Properties.Range%>
										  <%} else if(key === "TwoHanded"){%>
											   <%="Two-Handed"%>
										  <%} else {%>
											  <%=key%>
										  <%}})%></td>
								</tr> <%})%>
						</table>
				</div>	
			</div>
		</div>
</div>
<%- include("../partials/footer")%>